<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" href="style.css">
    <script>
        // Validate my form
        function validateForm() {
            // checking the name
            validateName('firstname');
            validateName('lastname');

            // check email
            validateEmailAddress('email');

            // check room
            validateSelect('room');

            // check guest
            validateSelect('guest');

            // check children
            validateSelect('children');

            // Arrival validation 
            validateSelect('day');
            validateSelect('month');
            validateSelect('year');
            validateSelect('hour');
            validateSelect('timePeriod');

            // Departure validation
            validateSelect('departure_day');
            validateSelect('departure_month');
            validateSelect('departure_year');
            validateSelect('departure_hour');
            validateSelect('timeperiodDeparture');

            //check free pickup
            validateSelect('freePickUp');

            //check passport number
            // validatePassportNumber('freePickUp');
        }

        // validate my email
        function validateEmailAddress(email) {
            var email = document.getElementById(email);
            if (email.value === "") {
                alert("Your Email Address must be filled out");
                return false;
            } else {
                var regExpEmail =
                    /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                if (!regExpEmail.test(email.value)) {
                    alert("Email is not in correct format");
                    email.focus();
                    return false;
                }
            }
        }

        // validate the input name
        function validateName(targetId) {
            var name = document.getElementById(targetId);
            var regExpFirstName = /^[$A-Z_][0-9A-Z_$]*$/i;
            var space = /\s/;
            if (name.value === "") {
                alert(targetId + " must be filled out");
                return false;
            } else {
                if (!regExpFirstName.test(name.value) && !space.test(name.value)) {
                    alert("Please enter " + targetId + " in correct format");
                    name.focus();
                    return false;
                }
            }
        }

        // validate the room
        // function validateSelect(select) {
        //     var dropdown = document.getElementById(select);
        //     if (dropdown.value === "-1") {
        //         alert("Please select any options from "+select);
        //         return false;
        //     }
        // }

        // // validate passport number
        // function validatePassportNumber(number) {
        //     var passportNo = document.getElementById(targetId);
        //     var regExPassportNumber = /^(?!^0+$)[a-zA-Z0-9]{3,20}$/;
        //     if (passportNo.value === "") {
        //         alert("Passport Number must be filled out");
        //         return false;
        //     } else {
        //         if (!regExPassportNumber.test(passportNo.value)) {
        //             alert("Please enter passport number in correct format");
        //             passportNo.focus();
        //             return false;
        //         }
        //     }
        // }
    </script>
</head>

<body>
    <!-- navbar -->
    <div class="container">
        <nav class="navbar">
            <a class="logo" href="/index">Hotel name</a>
            <input type="checkbox" id="check">
            <label for="check">
                <i class="fas fa-bars" id="open"></i>
                <i class="fas fa-times" id="close"></i>
            </label>
            <ul class="nav-list">
                <li class="nav-item"><a href="/rooms" class="nav-link">Rooms</a></li>
                <li class="nav-item"><a href="/restaurant" class="nav-link">Restaurant</a></li>
                <li class="nav-item"><a href="/spa" class="nav-link">Service</a></li>
                <li class="nav-item"><a href="/about" class="nav-link">About</a></li>
                <li class="nav-item"><a href="/contact" class="nav-link">Contact</a></li>
                <li class="nav-item"><a href="/booking" class="nav-link book-btn">Book Now</a></li>
                <%if (!locals.session.userId) { %>
                    <li class="nav-item"><a href="/loginform" class="nav-link book-btn">Login</a></li>
                <% }else{ %>
                    <li class="nav-item">
                        <div class="dropdown">
                            <button class="nav-link book-btn" style="cursor: pointer;">User</button>
                            <div class="dropdown-content">
                                <a class="nav-link" href="/profile">Profile</a>
                                <a class="nav-link" href="/logout">Logout</a>
                            </div>
                        </div>
                    </li>
                <%}%>
            </ul>
        </nav>
    </div>
    <section class="contact">
        <div class="container">
            <article class="main">
                <form action="/booking" method="post" id="book_reservation" onsubmit="validateForm()">
                    <div class="col-2">
                        <ul>
                            <div class="menu-header">
                                <h2 class="headline" style="color: #3e61a0;">Hotel Booking</h2>
                            </div>

                            <div class="selectdate">
                                <!-- arrival date and time -->
                                <li>
                                <li>
                                    <span style="color: #3e61a0; font-size: 2rem;">Arrival Date *</span>
                                    <div>
                                        <input type="date" id="ArrivalDate" required placeholder="Arrival" required
                                            style="margin-top: 10px;">
                                    </div>
                                </li>
                                <br>

                                <!-- departure date and time -->
                                <li>
                                <li>
                                    <span style="color: #3e61a0; font-size: 2rem;">Departure Date *</span>
                                    <div>
                                        <input type="date" id="DepartureDate" required placeholder="Departure" required
                                            style="margin-top: 10px;">
                                    </div>
                                </li>
                            </div>

                            <div class="selectroom">
                                <div class="room">
                                    <li>
                                        <span style="color: #3e61a0; font-size: 2rem;">Number Of Guests *</span>
                                        <div>
                                            <select name="guestNum" id="guest" required style="margin-top: 10px;">
                                                <option selected disabled value="-1">Number of guests</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                            </select>
                                        </div>
                                    </li>
                                </div>
                                <div class="add-btn">
                                    <button id="btns" class="btn book-btn" type="button">Book more rooms</button>
                                </div>
                            </div>
                            <!-- guest num -->

                            <br><br><br>
                            <div id="containers"></div>
                            <script>
                                const btn = document.querySelector("#btns");
                                const container = document.querySelector("#containers");
                                let orderNumber = 1;
                                btn.addEventListener("click", function () {
                                    const roomForm = document.createElement("div");
                                    roomForm.classList.add("room-form");
                                    const orderLabel = document.createElement("span");
                                    orderLabel.innerText = `Order ${orderNumber}:`;
                                    orderNumber++;
                                    const deleteBtn = document.createElement("button");
                                    deleteBtn.classList.add("delete-btn");
                                    deleteBtn.style.innerText = "Delete";
                                    deleteBtn.addEventListener("click", function () {
                                        roomForm.remove();
                                        orderNumber--;
                                    });
                                    roomForm.innerHTML = `
                                            <div class="container">
                                                <h3>Your room</h3>
                                                <article class="main">
                                                    <div style="padding: 15px 15px 15px 15px;"> 
                                                        <li>
                                                        <span style="color: #3e61a0; font-size: 2rem;">Number Of Adults *</span>
                                                        <div>
                                                            <select name="guestNum" id="guest" required style="margin-top: 10px;">
                                                                <option selected disabled value="-1">Number of guests</option>
                                                                <option value="1">1</option>
                                                                <option value="2">2</option>
                                                                <option value="3">3</option>
                                                                <option value="4">4</option>
                                                            </select>
                                                        </div>
                                                    </li>
                                                    </div>
                                                </article>
                                            </div>
                                        `;
                                    roomForm.appendChild(deleteBtn);
                                    container.appendChild(roomForm);
                                })
                            </script>

                            <li>
                                <button class="btn btn-white" type="submit">Submit</button>
                            </li>
                            <br><br>
                        </ul>
                    </div>
                </form>
            </article>
        </div>
    </section>
    <footer>
        <div class="container">
            <div class="back-to-top">
                <a href="#booking"><i class="fas fa-chevron-up"></i></a>
            </div>
            <div class="footer__content row">
                <div class="col-3">
                    <h4>About</h4>
                    <p>We are a part of chain of luxury hotels which extends all over the world.
                        We provide a luxorious stay with various value added and free services which will make you visit
                        us over and over again.
                    </p>
                </div>
                <div class="col-3">
                    <h4>Payment Methods</h4>
                    <p>Pay any way you choose, we support all payment options</p>
                    <ul class="payment-methods">
                        <li>
                            <a href="#">
                                <i class="fab fa-paypal"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fab fa-cc-visa"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fab fa-cc-mastercard"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fab fa-apple-pay"></i>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-3">
                    <h4>Get Social</h4>
                    <p>Follow us on social media and keep in touch with us.</p>
                    <ul class="social-icons">
                        <li>
                            <a href="#">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fab fa-tripadvisor"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
</body>

</html>